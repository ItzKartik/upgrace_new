{% extends 'base.html' %}
{% load static %}
{% block navbar %}
    {% csrf_token %}
    <style>
    a:hover{
        text-decoration: none;
    }
    .progress{
        height: 30px;
        border-radius: 50px;
        background-color: rgba(225, 225, 225, 0.5);
    }
    .progress-bar{
        padding: 20px 0px;
        background-color: #ff253a;
    }
    .progress-bar h3{
        font-size: 1.3rem;
        color: white;
        font-weight: 700;
        font-family: "Josefin Sans";
    }
    .txt_grad{
        color: #4A00E0;
    }
    @media(max-width: 1200px){
        .txt_row{
            text-align: center;
            margin: -30px 0px 0px 0px !important;
            margin-top: -30px !important;
        }
    }
    @media(max-width: 500px){
        .img2{
            width: 320px !important;
        }
        .fp{
            height: 300px !important;
        }
        .overlay{
            height: 500px !important;
        }
        .col-md-4{
            margin: 5px !important;
        }
        #bulk{
            display: none;
        }
        .img1{
            margin-top: 200px !important;
        }
        .txt_row{
            text-align: center;
            margin: 0px !important;
        }
    }
    @media(max-width: 1025px){
        .col-md-4{
            margin: 5px !important;
        }
        #bulk{
            display: none;
        }
        .img1{
            margin-top: 200px !important;
        }
        .txt_row{
            text-align: center;
            margin: 0px !important;
        }
    }
    .btn{
        background: linear-gradient(to right, #4A00E0, #8E2DE2);
        border: 2px solid white;
        border-radius: 50px;
        width: 150px;
        color: white;
        padding: 10px !important;
    }
    .btn:hover, .btn:focus{
        transition: ease 1s;
        border: 2px solid white;
        outline: none;
        color: black;
    }
    .btn:focus,.btn:active {
        outline: none !important;
        box-shadow: none;
    }
    .count1, .count2, .count3, .count4{
        font-size: 2rem;
        color: white;
        font-weight: 700;
    }
    .c1:hover, .c2:hover, .c3:hover{
        transition: ease 1s;
        cursor: pointer;
        border: 2px solid blue;
    }
    div.overlay{
        z-index: 2;
        width: 100%;
        height: 700px;
        position: absolute;
        box-shadow: 0 0 1rem 0 rgba(0, 0, 0, .2);
        border-radius: 5px;
        background-color: rgba(255, 255, 255, 0.15);
        /* background-color: rgba(206, 206, 206, 0.15);#} */
        backdrop-filter: blur(12px);
        color: #fff;
    }
    .fc1{
        border: 2px solid #4A00E0;
        width: 100%;
        height: 70px;
        color: #4A00E0;
        /* background: linear-gradient(to right, #4A00E0, #8E2DE2); */
        background: transparent;
    }
    .fc1::placeholder{
        color: #4A00E0;
        font-size: 1rem;
    }
    .form-group{
        background: transparent;
    }
    .question_con{
        padding: 20px; background: white; border-radius: 5px;
        margin: 5px;
        font-size: 20px;
        font-family: 'Work Sans';
    }
    .question_con p{
        font-size: 15px;
    }
    .question_con h4{
        font-size: 20px;
    }
    .fa{
        cursor: pointer;
    }
    .fa-chevron-down, .fa-chevron-up{
        color: #4A00E0;
    }
    .borderless td{
        border: none;
    }
    .btn-primary:hover{
        transition: all 0.3s ease-in-out;
        margin-top: -5px;
        color: white;
        box-shadow: 0px 0px 20px 0px rgb(173, 173, 173);
    }
    .sharenow_box_hashtag{
        width: 25rem;
        padding: 20px 0px;
    }
    @media(max-width: 780px){
        .sharenow_box_hashtag{
            width: 18rem !important;
        }
    }
    .fab:hover{
        cursor: pointer;
    }
    div.overlay{
        z-index: 3;
        width: 100%;
        height: 650px;
        position: absolute;
        border-radius: 5px;
    }
    </style>
    <div class="share_now_hashtag col-md-12 mx-auto text-center position-fixed" style="display: none; z-index: 2000;" data-aos="fade-down" data-aos-offset="200" data-aos-duration="1000" data-aos-delay="50">
        <div class="card sharenow_box_hashtag mx-auto text-center col-md-3" style="top: 150px; z-index: 2000; color: black; border-radius: 10px;">
            <div class="card-body mx-auto">
                <h1 style="font-weight: bolder;">Share Now</h1>
                <hr>
                <div class="row" style="padding: 10px 0px 10px 0px;">
                    <i onclick="shared_hashtags('whatsapp');" style="font-size: 2.3rem; color: green;" class="mx-auto fab fa-whatsapp"></i>
                    <i onclick="shared_hashtags('facebook');" style="font-size: 2.3rem; color: blue;" class="mx-auto fab fa-facebook"></i>
                    <i onclick="shared_hashtags('twitter');" style="font-size: 2.3rem; color: rgb(85, 207, 255);" class="mx-auto fab fa-twitter"></i>
                    <i onclick="shared_hashtags('linkedin');" style="font-size: 2.3rem; color: darkblue;" class="mx-auto fab fa-linkedin"></i>
                    <i onclick="shared_hashtags('link');" style="font-size: 2.3rem; color: blue;" data-clipboard-text="www.upgrace.in" class="mx-auto fa fa-link copyit"></i>
                </div>
            </div>
            <div class="share_it_hashtag" style="padding: 5px; display: none;">
                <p style="font-size: 20px; color: red;">Refresh The Page To Continue....</p>
            </div>
        </div>
        <script>
            new ClipboardJS('.copyit');
        </script>
    </div>
    <div class="try_other_hashtag col-md-12 mx-auto text-center position-fixed" style="display: none; z-index: 2000;"
    data-aos="fade-down" data-aos-offset="200" data-aos-duration="1000" data-aos-delay="50" style="background: transparent;">
    <div class="card mx-auto text-center"
        style="top: 50px; width: 20rem; z-index: 2000; color: black; border-radius: 5px;">
        <div class="card-body mx-auto">
            <h1 style="color: rgb(85, 0, 255); font-weight: 700;" class="">Try Our<br><h3>Other Free Services</h3></h1>
            <hr>    
            <div class="row" style="padding:0px 0px 0px 0px;">
                <a class="mx-auto col" href=""><div class="mx-auto text-center">
                    <i style="font-size: 2.5rem; color: red;"
                    class="mx-auto far fa-heart"></i>
                    <h6><br>Get<br>Likes</h6>
                </div></a>
                <a class="mx-auto col" href=""><div class="mx-auto text-center">
                    <i style="font-size: 2.5rem; color: rgb(0, 0, 0);"
                    class="mx-auto far fa-comments"></i>
                    <h6><br>Give<br>Comments</h6>
                </div></a>
                <a class="mx-auto col" href=""><div class="mx-auto text-center">
                    <i style="font-size: 2.5rem; color: rgb(36, 36, 36);"
                    class="mx-auto fas fa-users"></i>
                    <h6><br>Get<br>Followers</h6>
                </div></a>
            </div>
        </div>
    </div>
</div>
    <div class="form_keyword fp mx-auto text-center justify-content-center" style="height: 300px; color: black; margin: 120px 0px 150px 0px; left: 0; position: relative; z-index: 9;" data-aos="fade-up" data-aos-offset="200" data-aos-duration="1000" data-aos-delay="50">
        <div class="col-sm-12 first-hashtag mx-auto text-center">
            <h2 style="color: red;" class="error_txt"></h2>
            <form method="post" class="col-md-6 hashtag_form mx-auto text-center" style="top: 120px;">{% csrf_token %}
                <div class="form-group mr-auto text-left">
                    <label for="keyword_id"></label>
                    <input required id="keyword_id" name="keyword" style="padding: 25px; border-radius: 50px" class="form-control fc1" type="text" placeholder="Type The Keyword"/>
                </div>
                <br>
                <button type="submit" class="btn btn-primary">GetHashtags</button>
            </form>
        </div>
        <div class="col-sm-12 progress-hashtag" style="left: 0; display: none">
            <h1 class="updated_hashtag"></h1>
            <div class="col-md-6 mx-auto text-center" style="padding: 40px;">
                <div class="progress">
                  <div class="progress-bar progress-bar-striped active" id="myBar" role="progressbar"
                  aria-valuenow="5" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
                    <h3 class="progress-count"></h3>
                  </div>
                </div>
            </div>
        </div>
        <div class="col-sm-12 wantmore-hashtag" style="left: 0; display: none;">
            <div class="col-md-7 mx-auto text-center" style="padding: 40px;">
                <div class="mx-auto text-left" style="z-index: 4;">
                    <div style="color: black;">
                        <textarea rows="7" style="border-radius: 10px;" id="bar" class="hashtags form-control"></textarea>
                    </div><br>
                    <div class="mx-auto text-center">
                        <button data-clipboard-target="#bar" onclick="alert('Copied! You can now paste them :)');" class="btn btn-primary">Copy</button>
                        <button class="btn_more_followers btn btn-primary">
                            <a style="color: white;" href="">Go Back</a></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
    var count = 0;
    var i = 0;
    var t = 0;
    var first_hashtag = $('.first-hashtag');
    var progress_part = $('.progress-hashtag');
    var more_part = $('.wantmore-hashtag');
    var ad_part = $('.ad-part');
    var updating = '';
    let text = ['Reached', 'Hashtag Fetched', 'Done'];

    function share_now(){
        $('.form_keyword').hide();
        $('.share_now_hashtag').fadeIn();
    }

    function try_others(){
        $('.form_keyword').hide();
        $('.try_other_hashtag').fadeIn();
    }

    $(document).ready(function () {
        if(!!$.cookie('times_keyword')){
            console.log($.cookie('times_keyword'));
            if (parseInt($.cookie('times_keyword')) >= 19){
                try_others();
                $.removeCookie('times_keyword');
                $.removeCookie('keyword');
            }
            else if (!!$.cookie('shared_hashtags')){
                $.removeCookie('shared_hashtags');
            }
            else{
                if(parseInt($.cookie('times_keyword')) === 4 || parseInt($.cookie('times_comments')) === 9 || parseInt($.cookie('times_keyword')) === 19){
                    console.log($.cookie('times_keyword'));
                    share_now();
                }
                else{
                    
                }
            }
            $('#keyword_id').val($.cookie('keyword'));
        }
        else{
            $.cookie('times_keyword', 0);
        }
    });
    
    $('.hashtag_form').on('submit', function (e) {
        e.preventDefault();

        $('.gethashtags').prop("disabled", true);
        
        let keyword = $('#keyword_id').val();
        var keyword = keyword.toLowerCase();
        $.cookie('keyword', keyword, { expires: 1 });
        
        container_works(first_hashtag, progress_part);
        move();
        var updating = setInterval(changeText, 1000);
        $('.gethashtags').prop("disabled", false);
        
        $.ajax({
            url: "{% url 'hashtags:generator' %}",
            type: "POST",
            data: {
                keyword: keyword,
                csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val()
            },
            success: function (data) {
                $('.hashtags').html('');
                var d = data.split('#');
                for (i=0; i < 31; i++){
                    if (d[i] == ''){

                    }
                    else{
                        $('.hashtags').append('#'+d[i]+' ').fadeIn();
                    }
                }
                container_works(progress_part, more_part);
                if (!!$.cookie('times_keyword')) {
                    $.cookie('times_keyword', parseInt($.cookie('times_keyword')) + 1);
                }
                else {
                    $.cookie('times_keyword', 1, { expires: 1 });
                }
                var clipboard = new ClipboardJS('.btn');
            },
            error: function (error) {
                console.log(error);
                container_works(progress_part, first-hashtag);
                error_txt();
            }
        });
    });

    function error_txt() {
        $('.error_txt').html('');
        $('.error_txt').append('Network Problem... Please Try Again Later !!!')
    }

    function move() {
        if (i == 0) {
            i = 1;
            var elem = document.getElementById("myBar");
            var count = $(".progress-count");
            var width = 0;
            var id = setInterval(frame, 200);
            function frame() {
                if (width >= 100) {
                    count.html('');
                    count.html(width + "%");
                    clearInterval(id);
                    i = 0;
                } else {
                    count.html('');
                    count.html(width + "%");
                    width = parseInt(width) + 4;
                    elem.style.width = width + "%";
                }
            }
        }
    }

    function container_works(first_con, second_con) {
        first_con.fadeOut();
        second_con.fadeIn();
    }

    function show(cls) {
        cls.css({ 'display': 'block' });
    }

    function hide(cls) {
        cls.css({ 'display': 'none' });
    }

    function changeText() {
        if (parseInt(count) == 3) {
            clearInterval(updating);
        }
        else {
            $('.updated_text').fadeOut('slow');
            $(".updated_hashtag").html('<h3 class="updated_text" style="color: #4A00E0; font-weight: 700;">' + text[count] + '</h3>');
            setTimeout(function () {
                count < 3 ? count++ : count = 0;
            }, 500);
        }
    }

    function shared_hashtags(type) {
        $.cookie('shared_hashtags', 1, { expires: 1 });
        var whats_link = 'https://api.whatsapp.com/send?phone=0000000000&text=Get+genuine+popularity+on+instagram+now';
        var facebook_link = 'https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fupgrace+in';
        var linkedin_link = 'https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Fupgrace.in%2F&title=Get+Genuine+Popularity+Without+Password&summary=Tricks%2C+%2C+To+Get+Likes+Comments+Followers+Hashtags+For+Free.&source=UPGRACE.IN';
        var twitter_ink = 'https://twitter.com/intent/tweet?url=http%3A%2F%2Fupgrace.com%2F&text=Get+Genuine%2C+Popularity%2C+Without+Password.&hashtags=teenagers,memes,fans,fam';
        if (type == 'whatsapp') {
            window.open(whats_link, '_blank');
            $('.share_it_hashtag').fadeIn();
        }
        else if (type == 'facebook') {
            window.open(facebook_link, '_blank');
            $('.share_it_hashtag').fadeIn();
        }
        else if (type == 'twitter') {
            window.open(twitter_ink, '_blank');
            $('.share_it_hashtag').fadeIn();
        }
        else if (type == 'linkedin') {
            window.open(linkedin_link, '_blank');
            $('.share_it_hashtag').fadeIn();
        }
        else {
            $('.share_it_hashtag').fadeIn();
        }
    }
    </script>
{% endblock navbar %}
